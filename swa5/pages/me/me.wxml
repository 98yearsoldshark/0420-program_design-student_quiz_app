<!-- pages/me/me.wxml -->
<navigation-bar title="个人中心" back="{{false}}" color="black" background="#FFF"></navigation-bar>

<view class="me-container">
  <!-- 未登录状态 -->
  <view class="user-info-wrapper" wx:if="{{!isLoggedIn}}" bindtap="goToLogin">
    <view class="avatar-wrapper">
      <image class="avatar" src="/static/images/default-avatar.png"></image>
    </view>
    <view class="user-info">
      <view class="login-text">点击登录</view>
    </view>
  </view>
  
  <!-- 已登录状态 -->
  <view class="user-info-wrapper" wx:else>
    <view class="avatar-wrapper">
      <image class="avatar" src="/static/images/default-avatar.png"></image>
    </view>
    <view class="user-info">
      <view class="user-name">{{userInfo.name || '用户' + userInfo.id}}</view>
      <view class="user-role">{{userInfo.role === 'student' ? '学生' : 
                                userInfo.role === 'teacher' ? '教师' : 
                                userInfo.role === 'assistant' ? '助教' : 
                                userInfo.role === 'admin' ? '管理员' : '用户'}}</view>
    </view>
  </view>
  
  <!-- 菜单列表 -->
  <view class="menu-list">
    <!-- 基本信息 -->
    <view class="menu-group">
      <view class="menu-item" wx:if="{{isLoggedIn}}">
        <view class="menu-item-left">
          <text class="menu-item-label">学校</text>
        </view>
        <view class="menu-item-right">
          <text class="menu-item-value">{{userInfo.school || '未填写'}}</text>
        </view>
      </view>
      
      <view class="menu-item" wx:if="{{isLoggedIn}}">
        <view class="menu-item-left">
          <text class="menu-item-label">班级</text>
        </view>
        <view class="menu-item-right">
          <text class="menu-item-value">{{userInfo.classNumber || '未填写'}}</text>
        </view>
      </view>
      
      <view class="menu-item" wx:if="{{isLoggedIn}}">
        <view class="menu-item-left">
          <text class="menu-item-label">学号</text>
        </view>
        <view class="menu-item-right">
          <text class="menu-item-value">{{userInfo.studentId || '未填写'}}</text>
        </view>
      </view>
      
      <view class="menu-item" wx:if="{{isLoggedIn}}">
        <view class="menu-item-left">
          <text class="menu-item-label">邮箱</text>
        </view>
        <view class="menu-item-right">
          <text class="menu-item-value">{{userInfo.email || '未填写'}}</text>
        </view>
      </view>
    </view>
    
    <!-- 账户安全 -->
    <view class="menu-group">
      <view class="menu-group-title">账户安全</view>
      <view class="menu-item" bindtap="goToChangePassword">
        <view class="menu-item-left">
          <text class="menu-item-label">修改密码</text>
        </view>
        <view class="menu-item-right">
          <text class="menu-item-arrow">></text>
        </view>
      </view>
    </view>
    
    <!-- 退出登录 -->
    <view class="menu-group" wx:if="{{isLoggedIn}}">
      <view class="menu-item logout-item" bindtap="handleLogout">
        <text>退出登录</text>
      </view>
    </view>
  </view>
</view> 